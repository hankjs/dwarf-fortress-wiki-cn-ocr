{{Quality|Superior}}
{{av}}
[[File:aquifer_preview.png|right]]
'''含水层'''是一个地下[[layer|层]]，由容纳地下水的[[soil|土壤]]或[[stone|石头]]组成。一旦暴露，它将开始渗漏[[water|水]]，如果不加以管理，可能会导致大量的[[Fun|乐趣]][[flood|洪水]]。定居区域矩形内的每个[[embark|定居]]图格都可能包含含水层。

== 渗漏 ==
含水层图格在任何''相邻''的开放图格中产生水——'''北、南、东、西'''<u>以及'''下方'''</u>。含水层产生的水量取决于它的类型。'''重含水层'''产水更快，与'''轻含水层'''相比更难管理。含水层无法被排干；地下水是无限的，即使是单个孤立的图格也会永远渗水。然而，[[smoothing|平滑]]、开采、雕刻的楼梯或[[channel|引导]]的含水层图格不再产生水。位于[[ocean|海洋]][[biome|生物群系]]中的含水层会产生咸水；其他生物群系中的含水层会产生淡水。

== 识别 ==
如果你向下挖掘上下楼梯并遇到含水层，含水层图格将显示为[[damp stone|潮湿土壤]]或石头，并且该图格的挖掘指定将被取消。如果你水平开采，在突破含水层之前，你同样会收到"潮湿石头"的警告。如果这些图格旁边或上方没有水，则这些是含水层图格。如果你从下方向''上''挖掘上下楼梯或斜坡，并从下方遇到含水层，含水层图格将立即开始在楼梯井中产水。

== 含水层的类型 ==
[[File:aqua_varied.png|thumb|150px|定居屏幕：具有混合含水层的区域。]]
[[embark|定居]]位置内包含的含水层类型可以在[[embark screen|定居屏幕]]中查看，定居矩形中的每个图格（默认4×4）可能独立于其他图格包含含水层。除了重或轻含水层外，如果定居矩形内同时存在两种类型，''矮人要塞''还可以显示"混合含水层"（还要注意，相邻图格的生物群系可能"溢出"到一个图格中，导致这些部分出现不同的、未宣布的含水层）。

=== 轻含水层 ===
轻含水层是迄今为止最常见的（大约每20个含水层中有19个），产水速度足够慢，可以通过一次挖出一层并相当快地封墙来轻松穿透。轻含水层可用于低水应用，例如缓慢填充蓄水池供水井使用，或供给[[waterfall|瀑布]]。

开放图格只有在直接位于含水层图格的'''北、南、东、西或下方'''时才会从轻含水层接收水（不在它们的'''上方'''图格中，也不在任何对角相邻的图格中）。开放图格接收的水量是随机的，平均每月四次，可能低至两次或高至六次。无论相邻含水层图格的数量如何，接收的水量都相同。

由于水会渗漏到含水层'''下方'''的图格中，你必须在你希望使用的每个潮湿[[Z-level|Z层]]中挖出并封墙或平滑相同的图格，否则会发现所有较低的z层都被来自看似未知来源的水淹没；实际上是上方粗糙的含水层墙壁。地板似乎在渗水，但实际上是天花板。没有必要平滑或建造地板，因为只有粗糙的墙壁图格会渗水。然而，如果你想做的是挖一个蓄水池，最有效的方法是简单地从含水层下方直接挖出一个大区域，因为每个图格都会以稳定的速度充满水，直到达到7/7。当你试图挖出的每个图格都是潮湿石头，但下方的层是干燥的时，你就知道你在正确的层中建造蓄水池。

如果你希望在轻含水层内挖掘大面积区域而不费力地持续封墙，可以将定期排水口挖到非含水层的开放区域，在那里水可以比到达速度更快地蒸发。但是，请注意，水排放到的开放区域需要比挖出的含水层面积大得多。或者将水排到地图边缘。

与重含水层不同，轻含水层图格不会吸收（排走）水。

虽然挖掘穿过轻含水层墙壁并不是很危险，但你的矮人会在每次显示新图格时持续取消"潮湿石头"警告的指定。因此，玩家必须反复重新指定轻含水层方格以让矮人开采它，使其成为一件繁琐的事情。在不使用[[DFHack]]等外部工具的情况下，无法关闭此自动取消。或者，一旦所有所需的图格从上方显示并指定为开采，当"潮湿石头"警报暂停开采活动时，只需对每个警报取消暂停（请注意，指定的未显示部分仍将被取消）。

=== 重含水层 ===
与轻含水层不同，重含水层几乎立即产生水，有效地阻止了在含水层层或其下方1 z层的挖掘。这一点，再加上它们通常位于富含[[loam|壤土]]和[[sand|沙子]]的区域，使得在拥有重含水层的区域很难找到大量的[[stone|石头]]，使它们更具挑战性。

粗糙的重含水层墙壁也充当无限的水''汇''，就像开放的地图边缘一样。单个含水层图格每个tick可以吸收任何量的[[pressure|加压]]水，仅受供应限制。一个不太明显的后果是，如果在多层含水层中开一个开口，只有最低的打开层才会充满水。

根据经验，重含水层大约每14个tick获得1/7的水，尽管观察到生产从2-28个tick不等。这个速率似乎不会因相邻含水层图格的数量而显著变化。

== 它们在哪里被发现 ==
含水层根据地形的排水情况出现。低海拔地区——特别是靠近[[river|河流]]和海洋的地区——更容易出现含水层，而靠近山脉的位置则不太可能，但仍然可能。根据[[embark|定居]]位置的生物群系，你可能会定居在一个不包含含水层的区域，或者在你的地图上最多有几个含水层。

'''可以'''包含含水层的层：
{{columns-list|colwidth=20em|
* [[sandy clay loam|砂质粘壤土]]
* [[silty clay loam|粉质粘壤土]]
* [[loam|壤土]]
* [[sandy loam|砂质壤土]]
* [[silt loam|粉质壤土]]
* [[loamy sand|壤质砂土]]
* [[silt|粉土]]
* [[sand (tan)|沙子]]
* [[yellow sand|黄沙]]
* [[white sand|白沙]]
* [[black sand|黑沙]]
* [[red sand|红沙]]
* [[peat|泥炭]]
* [[pelagic clay|远洋粘土]]
* [[calcareous ooze|钙质软泥]]
* [[siliceous ooze|硅质软泥]]
* [[sandstone|砂岩]]
* [[conglomerate|砾岩]]
* [[puddingstone|布丁石]]
}}
<!-- Note: only layers with the [AQUIFER] token can support aquifers. Other layers can appear directly below an aquifer and will blink "damp", but they are not actually part of the aquifer - digging into them will still cause water to come from above. Please check the raws for the [AQUIFER] token before adding to this list. -->

'''不能'''包含含水层的层，尽管它们的名字暗示相反：
{{columns-list|colwidth=20em|
* [[clay|粘土]]
* [[silty clay|粉质粘土]]
* [[sandy clay|砂质粘土]]
* [[clay loam|粘壤土]]
* [[siltstone|粉砂岩]]
* [[mudstone|泥岩]]
* [[claystone|粘土岩]]
}}

== 在含水层中工作 ==
需要记住的几点：
* 工人所站图格上的水如果太高会导致任务取消。建造任务（例如建墙）会被2/7深度暂停，但开采任务只会被4/7深度的水停止。
* 流动的水会导致父母放下他们的婴儿，导致任务取消，偶尔还会[[fun|有趣]]。
* 含水层不会在对角图格中产水，但会在它们正下方的开放图格中产水。因此，你会想要在最低含水层下方挖两个z层，然后再继续你的要塞。

=== 探测含水层 ===
你可以通过向含水层挖掘上下[[stairs|楼梯]]来发现含水层下方的层。这将显示含水层下方的图格，如果这是非含水层（如[[clay|粘土]]、[[ore|矿石]]或基岩），那么你就知道含水层在该位置只有1 Z层深。这种方法只能用于确定含水层是1层深还是多层深，但这仍然足够的信息来帮助计划如何穿透它。对于多层重含水层，强烈建议使用基于泵的方法。

== 处理重含水层 ==
===绕过===
如果你的定居点被多个生物群系覆盖，重含水层可能不会在每个生物群系中都存在。在某些地图上，这可能表现为在原本由土壤组成的景观中出现石头突出；在其他地图上，生物群系的变化可能表现为土壤类型、植被类型或密度的变化。你可能能够通过不含重含水层的生物群系向下挖掘，到达重含水层下方的Z层，然后（如果你愿意）在重含水层下方挖隧道到以前无法到达的区域。

即使你的站点的所有生物群系都包含含水层，它们也可能不在同一个Z层，所以你仍然可能能够在一个生物群系中向下挖掘，到达另一个生物群系中含水层下方的Z层。

此外，如果你的生物群系包含深崖（如河谷），可能可以沿着峡谷侧面建造楼梯下到含水层以下。

=== 双缝法 ===
{{Main|Double-slit method}}
这是最常用的方法之一，因为它方便而强大。它最初由QuantumMenace开发，并在下面的[[#The pump method|泵法]]中也有提到。

=== 舱口技巧 ===
[[hatch|舱口]]技巧是一种让一两个矮人穿过单个重含水层的简单方法。（这不要与只适用于单层含水层混淆。）你可以使用该技巧基本上绕过多层含水层的问题最终层，允许在你通过含水层放置密封楼梯之前访问岩石层和洞穴。

首先，你必须向含水层挖一对上下楼梯（即如双缝法），同时用[[screw pump|螺旋泵]]排出其中一个图格，只需在该图格上建造一个舱口（舱口必须建在下楼梯或上下楼梯上才能使技巧奏效）。舱口建好后，泵仍在运行，在舱口下方指定一个上下楼梯，矿工会站在舱口"顶部"挖出楼梯，然后他可以穿过舱口继续挖掘，舱口会让1-2的水随他一起通过，然后关闭并防止更多的水跟随矿工。矿工现在安全地在含水层下方，可以向下挖到洞穴或地图边缘并建立排水口，允许你使用更快的[[#The drainage method|从下方排水法]]来完成穿透含水层。对于最终层是沙子的多层含水层，这可以节省大量时间。如果你计划将楼梯直接延伸到洞穴，对于单层含水层来说，它也比塌陷更快更干净（使排水口本质上是免费的）。

===矿石法===
在含水层不在土壤层中而是在[[sedimentary layer|沉积层]]（如砂岩）中的地图上，可能可以通过如[[magnetite|磁铁矿]]等矿石矿床向下挖隧道。为了使其工作，你必须找到一个恰好在你需要挖掘的每个Z层都有矿石矿床的地方。这只能通过繁琐的试错来完成，或者通过使用DFHack的<tt>reveal</tt>等实用程序。试错方法可以通过挖掘上下楼梯来更容易地完成，以显示它们下方的层而不实际挖掘到下层。这种方法对于位于[[conglomerate|砾岩]]层中的含水层更复杂，因为[[puddingstone|布丁石]]的大簇将支撑含水层，因此无法用于提供穿过它的路径。

=== "落跑小鸡"技术 ===
当新显示的潮湿图格取消开采指定时，如果没有任何其他开采指定，矿工将恢复为"无任务"状态，并需要几十个tick才能恢复开采。在那段时间里，矿工会走开，站点会被淹没，使下方的图格无法到达。然而，通过在含水层上方的层中挖掘向下楼梯，这些图格可以显示为潮湿，因此不会触发开采取消。一个足够快的矿工（专业或类似的应该适用于土壤层，取决于敏捷度）然后可以在其中一个图格中挖一个楼梯，在该图格被淹没之前，引导出相邻的图格，移除该图格并突破下方的层；如果该层也是重含水层，它将充当来自上方的水的无限排水口。这就打开了在上层挖掘工作空间的可能性。

虽然在原始方法中不是直接楼梯，但仅用镐头建立排水口对于初学者矿工也是可能的。可以从挖在要引导的图格角落的最多四个斜坡引导含水层图格，使得引导优先级高于斜坡挖掘优先级。使用这个，可以将排水口建立到土壤含水层的下一层，因为挖掘进度在显示的图格中累积。

如果你未能足够快地开采，或者如果流动的水将你的矿工推下引导的斜坡，矮人通常会走上楼梯到安全地带，但矿工可能会<s>溺水</s>享受乐趣。在石头含水层中，传奇矿工可以一次尝试引导就成功，至少专业矿工可以四次成功，尽管在第二种情况下他们会有溺水的风险，并且可能需要几周时间才能挖出下一个通道来扩大排水口。

=== 利用塌陷 ===
从概念上讲，这种方法涉及使用引导移除含水层的沙子、土壤或岩石，然后将干燥的沙子、土壤或粘土岛屿投入到产生的池塘中，然后可以通过产生的人工岛屿的中心挖一个楼梯。这至少需要一个天然干燥层，但如果有两个或更多可用则更灵活。这些方法的一个优点是它们可以由单个矿工仅用镐头而不需要其他资源来执行。

这不适用于[[construction|建造的]]墙壁，因为它们在塌陷时会解构。

'''注意：'''有一个错误{{bug|1206}}有时会阻止此方法工作。塌陷的层通常会变成在它们着陆的层挖出的层类型（例如，干燥壤土变成干燥沙子）。有时，塌陷到含水层中的干燥层也会转变为实际的含水层图格（例如，干燥壤土变成产水的沙子）。目前尚不清楚是什么触发了这种行为，但当它发生时，使用塌陷穿透含水层将是不可能的。

当未开采的图格塌陷到液体中时，被置换的液体传送到塌陷图格的''顶部''。因此，在堵塞含水层时，通常建议将含水层排水空间纳入设计中以处理被置换的水。

==== 塌陷示例 ====
[[File:Aquifer-Plug.png|frame|none|侧视图]]
*挖楼梯下到含水层。在含水层上方但在你的"塞子"下方挖掘。你需要一个5x5的陆地。（幻灯片2）
*引导出塞子将落入的区域。（幻灯片3）
*在塞子顶部留下一个单独的地板图格，并挖出塞子的外层。塞子现在应该是一个3x3的陆地。单个地板图格必须防止塞子掉落。（幻灯片3）
*引导出支撑塞子的地板图格。（幻灯片4和5）
*建造地板图格以到达塞子，并挖穿中间以到达含水层下方。（幻灯片6）

==== 多层同心环法 ====
如果你在顶部掉落层中建造许多环，一个套一个，你可以用含水层上方最少2个天然干燥土壤层突破多层含水层。使用建造的臂来固定中心环，从外部到内部掉落环。一旦环掉入下方的水中，泵出中心的水并再向下挖一层。完成后，掉落下一个环并继续该过程，直到你完成。由于你从外部开始掉落环，因此在开始之前需要知道含水层有多少层深。多个含水层的教程可以在这里找到：[[User:Rhenaya/HowtoDualAquifer]]

==== "落跑小鸡"塞子 ====
这种方法是为在敌对生物群系上的单镐挑战而开发的。在2-Z厚土壤含水层的特定（但常见）情况下，上方有两个干燥层，可以使用塌陷非常快速地穿透含水层而不突破表面并危及要塞的安全。该方法从落跑小鸡开始（见上文），之后清理出上部含水层层的一个区域并排入下层。然后下部干燥层塌陷，这意味着地下层只需要开采（以释放塞子）而不是作为塞子的一部分塌陷。

该程序在{{Forum|129994.msg4620421#msg4620421|此帖及后续帖子}}中有详细描述。

虽然尚未演示，但应该可以使用连续的落跑小鸡和清理周期以这种方式穿透任意深的土壤含水层。

=== 泵法 ===
抽水方法使用一个或多个[[screw pump|泵]]来保持一个区域足够干燥，以便平滑或[[wall|封墙]]侧面，停止水流。它不需要特殊环境或资源，除了木头和矮人（以及耐心）。最常见的是，引导出含水层的一个适度大小的部分，并建造几个螺旋泵面向它。在每个螺旋泵正后方引导出几个图格以接收和处理抽出的水。当泵被激活时，它们应该比含水层产水更快地抽水，允许石匠平滑或在你未来的楼梯周围建墙。在这个过程中你''会''得到任务取消，因为杂散的2/7的水会中断建造过程。当这种情况发生时，只需取消暂停建造，只要矮人在取消之前设法触摸墙壁，它就会逐步向完成移动并最终完成。根据螺旋泵和矮人的可用性，你可能需要一次封墙一个角或一侧，然后移动泵并重复。当钻穿多个含水层时，确保留出足够的空间在较低层建造额外的泵层和水处理渠道。

需要考虑的事项：
* 你的工作区域越小，你的矮人需要移除的水越少，建造完成越快。对于单层土壤含水层，你只需要开采五个图格（你的楼梯和它正北、正南、正东和正西的墙壁）；单层石头含水层只需要引导一个图格。
* 机械[[power|动力]]可能会派上用场，但矮人动力同样有效且更便携。
* 有时可以使用渠道代替墙壁，导致含水层在一层产生的水立即下落并被下层的含水层消耗。
* 这种方法可能需要一段时间。

==== 详细的具体泵法 ====
QuantumMenace的[[double-slit method|双缝法]]可以仅使用木头和矮人劳动力穿透任何深度的含水层。取自[http://www.bay12forums.com/smf/index.php?topic=79224.15 这个论坛帖子]。

[http://www.bay12forums.com/smf/index.php?topic=79224.0#msg2058307 更早]在同一个帖子中，Hans Lemurson提出了一种非常矮人的方法，也可以使用几个泵和机械穿透任何深度的含水层。

kingubu在[http://www.bay12forums.com/smf/index.php?topic=143064.0 这个论坛帖子]中提出了一种使用[[pump stack|泵塔]]而没有任务取消的便捷方法，见[[Pump-stack_method|泵塔法]]

Leonidas发布了一个[http://www.bay12forums.com/smf/index.php?topic=169616.0 详细程序]，配有大量插图，用于以有限资源和相对安全地挖掘穿过任何含水层。

===冻结法===
如果你在一个冰冻或非常寒冷的景观中玩，那里冬天下雪并立即冻结地图上的水，你可以使用[[channel|引导]]挖出一个3x3的地洞，并使其越来越深，直到你到达含水层。一旦你到达潮湿的岩石，用上下楼梯挖入其中，然后引导出下楼梯，暴露的水将变成冰，在引导之前挖掘上下楼梯允许图格在冻结之前安全地充满7/7的水，这避免了矿工被封在冰中的危险，并避免了一个错误（？），即深度小于7/7的冻结水不会在其上方产生地板。3x3洞的中心方格应该是可挖掘的冰，所以你可以到达下方的岩石。

如果你的要塞在一个变暖的区域，在洞内部周围建墙以阻止冰融化后水进入。为了在1x1楼梯周围建墙，需要一个5x5的洞，因为你需要留下一个外环的冰来密封含水层。

如果含水层有多层深，你需要从一个足够大的洞开始，以考虑密封含水层的冰墙和密封每层含水层冰墙的建造墙壁。基于泵的方法可能更可取。

作为建造第二堵墙来密封冰墙的替代方案，你可以在洞穴中建立排水口，并在融化时建造建造的墙壁。

===岩浆/黑曜石法===
如果你可以获得岩浆供应，你可以创建自己的黑曜石沉箱。通过引导进入含水层并用岩浆填充这些通道，或者通过挖掘楼梯并向下倾倒岩浆，可以在你的工作区域和含[[water|水]]岩石或[[soil|土壤]]之间创建一堵黑曜石墙。然而，随着最新版本世界生成的变化，这种方法比以前更困难，因为现在更难找到延伸到含水层上方的岩浆通风口。

===排水法===
在含水层中打了一个初始洞之后，你可能希望打另一个更大的洞，例如在洞穴中种植野草莓。或者你可能只是想要一个额外的（天然石头！）楼梯。一旦你从下方获得访问权限，这比从上方挖掘要容易得多，并且它还有一个额外的好处，即产生一个恰好你想要的大小的竖井。

定位洞穴并从洞穴向上挖一个上下楼梯或向下楼梯的排水竖井到含水层（向下楼梯充当格栅，比引导安全得多）。一旦排水竖井完成，向上打穿含水层（使用上下楼梯），直到你击中干燥的泥土。现在挖出竖井周围的墙壁并建造建造的墙壁以密封含水层。如果使用下楼梯挖出墙壁，速度会更快，可以在楼梯上建造建造的墙壁，水直接落下，因此建造总是可以开始而不会被暂停。始终从最高层向下建墙，这样矮人就不会从上方被倾倒水。

这种方法可用于创建任意大（和形状）的洞。从上方挖掘不切实际的大洞使用这种技术非常容易。它对于在含水层图格和非含水层图格混合的"层蛋糕"含水层中挖掘直竖井也非常有用。

只要意识到如果你不快速堵塞含水层墙壁，你的帧率必然会受到影响。

===修改法===
{{Mod}}
通过编辑原始文件并从inorganic_stone_layer.txt、inorganic_stone_mineral.txt和inorganic_stone_soil.txt中的所有适当条目中删除[AQUIFER]标记，可以从世界中删除所有含水层。这可以在创建新世界之前或之后完成，如果你发现一个特别好的位置仅因含水层的存在而被毁坏。为了修改现有世界，你必须从保存游戏文件夹中的原始文件中删除[AQUIFER]标记。

==== 使用DFHack ====
[[Utility:DFHack|DFHack]]命令<code>light-aquifers-only</code>将所有重含水层更改为轻含水层。如果你不想处理含水层，DFHack命令<code>aquifer drain --all</code>会从当前定居点的所有图格中删除含水层标志，而无需编辑原始文件。

===== 使用DFHack的gui/aquifer命令 =====
DFHack的[https://docs.dfhack.org/en/latest/docs/tools/gui/aquifer.html "gui/aquifer"]命令让你可以交互式地删除（或创建）特定图格上的含水层。如果你想在地图上保留重含水层，但不想处理突破它的麻烦，这很有用。

要创建一个无含水层的竖井，请执行以下操作：
# 通过点击DFHack标志并选择gui/launcher打开gui/launcher
# 运行gui/aquifer
# 绘制一个立方体（''例如4x4''）包含要排水的区域

不要担心击中非含水层图格：它们根本不应该受到该工具的影响。

==== 命令行（Linux） ====
请注意，这会阻止轻含水层和重含水层！

 cd df_linux/data/vanilla/vanilla_materials/
 sed -i 's/\[AQUIFER\]/(AQUIFER)/g' inorganic_stone_*.txt

然后生成你的世界。如果你以后想恢复标记，可以使用以下命令：

 sed -i 's/(AQUIFER)/[AQUIFER]/g' inorganic_stone_*.txt

==== 文本编辑器（所有操作系统） ====
你可以手动执行上面的命令行方法。

有三个文件，都在``"安装''Dwarf Fortress''的文件夹"\data\vanilla\vanilla_materials\objects``中找到：
* inorganic_stone_layer.txt
* inorganic_stone_mineral.txt
* inorganic_stone_soil.txt

在文本编辑器中打开这些文件，然后使用"查找和替换"功能，将所有``[AQUIFER]``实例替换为``(AQUIFER)``。以后，如果你想撤销该过程，将``(AQUIFER)``替换为``[AQUIFER]``。

== 含水层的好处 ==
含水层对于建造自给自足的要塞很有用，并且对于没有河流的地图上与水相关的[[megaprojects|巨型项目]]通常是必不可少的。

[[ocean|海洋]][[biome|生物群系]]外的含水层也含有淡水。由于含水层几乎总是位于地表附近，淡水含水层可以很容易地变成你的矮人的无限、安全、不冻结的饮用水源。虽然这两个角色也可以由[[Caverns|洞穴]]特征填充，但含水层允许你获得相同的优势，而不会暴露于潜在的<s>危险</s>有趣的洞穴生物。

=== 重含水层的好处？ ===
虽然令人讨厌，但重含水层可以吸收无限量的水，这意味着它们可以充当其上任何东西的排水口。例如，在含水层的较低Z层挖一个坑，然后通过在上方一层挖的通道将其连接到上方一层的突破含水层，将创建一个永久流动、紧凑、安全的水/动力源，完全包含在要塞内。

== 含水层类型分割的技术实现 ==
如果排水模20等于7，则含水层将是重的，所有其他含水层都是轻的。

== 错误 ==
* 本地定居地图中NW-SE对角线南/西的含水层不会显示在定居屏幕上（但它们仍然存在）。{{bug|11358}}

== 外部链接 ==
* [http://www.bay12forums.com/smf/index.php?topic=79224.15 QuantumMenace的双缝法]用于突破任何深度的含水层 - 图解指南
* [http://www.bay12forums.com/smf/index.php?topic=141600 舱口技巧]用ascii艺术描述。
[[File:aquifier_preview.png|thumb|360px|center|"这就是游戏内提示警告我们的！"<br><small>''摄影：Michael Behrens''</small>]]
{{World}}
