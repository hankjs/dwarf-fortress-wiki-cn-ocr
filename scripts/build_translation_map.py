"""
构建 Dwarf Fortress Wiki 中英词条映射表

从已翻译的中文词条中提取映射关系，同时提供额外翻译词典
"""

import json
import os
import re


def normalize_key(text):
    """标准化key，只保留字母数字并转小写"""
    return re.sub(r"[^a-zA-Z0-9]", "", text).lower()


def build_translation_map():
    """
    构建翻译映射表
    1. 从 wiki_cn 中提取已翻译的词条
    2. 创建一个词汇映射表用于临时翻译
    """
    script_dir = os.path.dirname(os.path.abspath(__file__))
    wiki_dir = os.path.join(script_dir, "wiki")
    wiki_cn_dir = os.path.join(script_dir, "wiki_cn")

    # 基础词条映射（标题映射）
    title_map = {}

    # 从已翻译的文件中提取映射
    if os.path.isdir(wiki_cn_dir):
        for filename in os.listdir(wiki_cn_dir):
            if filename.endswith("-CN.txt"):
                # 去掉 -CN.txt 后缀获取英文名
                en_name = filename[:-7]
                cn_file_path = os.path.join(wiki_cn_dir, filename)

                # 读取中文文件第一行（通常是标题或重定向）
                try:
                    with open(cn_file_path, "r", encoding="utf-8") as f:
                        first_line = f.readline().strip()

                    # 检查是否是重定向
                    redirect_match = re.match(
                        r"#redirect\s*\[\[(.+?)\]\]", first_line, re.IGNORECASE
                    )
                    if redirect_match:
                        cn_name = redirect_match.group(1)
                    else:
                        # 从文件名映射，中文标题通常在内容中
                        # 使用文件名作为英文key
                        cn_name = en_name  # 默认使用英文名

                    title_map[normalize_key(en_name)] = {"en": en_name, "cn": cn_name}
                except Exception:
                    pass

    # 扩展词汇映射表（用于内容翻译）
    # 这里可以手动添加更多常用词汇的映射
    vocabulary_map = {
        # 基础游戏概念
        "dwarf": "矮人",
        "dwarves": "矮人",
        "fortress": "要塞",
        "adventure": "冒险",
        "mode": "模式",
        "world": "世界",
        "generation": "生成",
        "game": "游戏",
        "player": "玩家",
        "unit": "单位",
        "creature": "生物",
        "item": "物品",
        "material": "材料",
        "ore": "矿石",
        "metal": "金属",
        "stone": "石头",
        "wood": "木材",
        "food": "食物",
        "drink": "饮料",
        "alcohol": "酒精",
        "water": "水",
        "weapon": "武器",
        "armor": "护甲",
        "clothing": "衣物",
        "tool": "工具",
        "furniture": "家具",
        "building": "建筑",
        "construction": "构造",
        "workshop": "工坊",
        "room": "房间",
        "bedroom": "卧室",
        "dining": "餐厅",
        "hospital": "医院",
        "barracks": "兵营",
        "stockpile": "储藏区",
        "zone": "区域",
        "activity": "活动",
        "designation": "指定",
        "job": "工作",
        "labor": "劳动",
        "profession": "职业",
        "skill": "技能",
        "attribute": "属性",
        "trait": "特质",
        "preference": "偏好",
        "thought": "想法",
        "emotion": "情绪",
        "stress": "压力",
        "happiness": "幸福",
        "sadness": "悲伤",
        "anger": "愤怒",
        "fear": "恐惧",
        "surprise": "惊讶",
        "disgust": "厌恶",
        "mood": "心情",
        "insane": "疯狂",
        "depressed": "沮丧",
        "ecstatic": "狂喜",
        "fine": "良好",
        "unhappy": "不开心",
        "happy": "开心",
        "very": "非常",
        "quite": "相当",
        "rather": "比较",
        "somewhat": "有点",
        "military": "军事",
        "civilian": "平民",
        "squad": "小队",
        "schedule": "日程",
        "alert": "警戒",
        "order": "命令",
        "command": "指挥",
        "training": "训练",
        "combat": "战斗",
        "attack": "攻击",
        "defend": "防御",
        "kill": "击杀",
        "die": "死亡",
        "dead": "死亡",
        "death": "死亡",
        "corpse": "尸体",
        "body": "身体",
        "bone": "骨头",
        "blood": "血液",
        "wound": "伤口",
        "injury": "伤害",
        "heal": "治疗",
        "recover": "恢复",
        "sick": "生病",
        "disease": "疾病",
        "syndrome": "综合征",
        "poison": "毒药",
        "toxin": "毒素",
        "trap": "陷阱",
        "mechanism": "机械",
        "lever": "杠杆",
        "pressure": "压力",
        "plate": "板",
        "spike": "尖刺",
        "bridge": "桥梁",
        "door": "门",
        "hatch": "舱口",
        "grate": "格栅",
        "bars": "栅栏",
        "wall": "墙",
        "floor": "地板",
        "ramp": "斜坡",
        "stair": "楼梯",
        "up": "上",
        "down": "下",
        "north": "北",
        "south": "南",
        "east": "东",
        "west": "西",
        "above": "上方",
        "below": "下方",
        "level": "层",
        "z-level": "Z层",
        "surface": "地表",
        "underground": "地下",
        "cavern": "洞穴",
        "depth": "深处",
        "hell": "地狱",
        "heaven": "天堂",
        "sky": "天空",
        "sun": "太阳",
        "moon": "月亮",
        "star": "星星",
        "weather": "天气",
        "rain": "雨",
        "snow": "雪",
        "storm": "风暴",
        "wind": "风",
        "temperature": "温度",
        "hot": "热",
        "cold": "冷",
        "warm": "温暖",
        "frozen": "冰冻",
        "magma": "岩浆",
        "lava": "熔岩",
        "fire": "火",
        "smoke": "烟",
        "steam": "蒸汽",
        "water": "水",
        "ice": "冰",
        "gas": "气体",
        "solid": "固体",
        "liquid": "液体",
        "mine": "挖掘",
        "channel": "挖掘渠道",
        "ramp": "建造斜坡",
        "stair": "建造楼梯",
        "wall": "建造墙壁",
        "floor": "建造地板",
        "remove": "移除",
        "cancel": "取消",
        "suspend": "暂停",
        "resume": "继续",
        "repeat": "重复",
        "close": "关闭",
        "open": "打开",
        "lock": "锁定",
        "unlock": "解锁",
        "forbid": "禁止",
        "claim": "认领",
        "dump": "倾倒",
        "melt": "熔化",
        "tan": "鞣制",
        "butcher": "屠宰",
        "cook": "烹饪",
        "brew": "酿造",
        "farm": "种植",
        "harvest": "收获",
        "chop": "砍伐",
        "cut": "切割",
        "carve": "雕刻",
        "engrave": "雕刻",
        "smooth": "打磨",
        "build": "建造",
        "construct": "建造",
        "place": "放置",
        "move": "移动",
        "haul": "搬运",
        "store": "存储",
        "stockpile": "储存区",
        "bin": "箱子",
        "barrel": "桶",
        "bag": "袋子",
        "bucket": "水桶",
        "cart": "推车",
        "wagon": "货车",
        "minecart": "矿车",
        "track": "轨道",
        "roller": "滚筒",
        "screw": "螺旋",
        "pump": "泵",
        "windmill": "风车",
        "waterwheel": "水车",
        "gear": "齿轮",
        "assembly": "组装",
        "axle": "轴",
        "horizontal": "水平",
        "vertical": "垂直",
        "power": "动力",
        "source": "来源",
        "transfer": "传输",
        "generate": "产生",
        "consume": "消耗",
        "animal": "动物",
        "plant": "植物",
        "tree": "树木",
        "shrub": "灌木",
        "grass": "草",
        "seed": "种子",
        "fruit": "水果",
        "vegetable": "蔬菜",
        "meat": "肉",
        "fish": "鱼",
        "egg": "蛋",
        "milk": "牛奶",
        "cheese": "奶酪",
        "bread": "面包",
        "meal": "餐食",
        "leather": "皮革",
        "cloth": "布料",
        "silk": "丝绸",
        "yarn": "纱线",
        "thread": "线",
        "dye": "染料",
        "pigment": "颜料",
        "gem": "宝石",
        "rough": "粗糙",
        "cut": "切割",
        "cabochon": "圆雕",
        "faceted": "刻面",
        "Artifact": "神器",
        "masterwork": "杰作",
        "quality": "品质",
        "legendary": "传奇",
        "exceptional": "卓越",
        "fine": "精美",
        "well-crafted": "精良",
        "masterfully": "精湛地",
        "created": "创造了",
        "engraved": "雕刻了",
        "decorated": "装饰了",
        "encrusted": "镶嵌了",
        "image": "图像",
        "depicting": "描绘",
        "menacing": "威胁的",
        "spikes": "尖刺",
        "bands": "带子",
        "rings": "环",
        "of": "的",
        "and": "和",
        "or": "或",
        "the": "",
        "a": "",
        "an": "",
        "is": "是",
        "are": "是",
        "was": "曾是",
        "were": "曾是",
        "has": "有",
        "have": "有",
        "had": "曾有",
        "will": "将",
        "be": "是",
        "been": "已被",
        "can": "可以",
        "could": "可以",
        "may": "可能",
        "might": "可能",
        "must": "必须",
        "shall": "应当",
        "should": "应该",
        "would": "将会",
        "this": "这个",
        "that": "那个",
        "these": "这些",
        "those": "那些",
        "with": "带有",
        "without": "没有",
        "for": "为了",
        "from": "从",
        "by": "通过",
        "to": "到",
        "in": "在",
        "on": "在",
        "at": "在",
        "over": "越过",
        "under": "在...之下",
        "between": "在...之间",
        "among": "在...之中",
        "through": "穿过",
        "into": "进入",
        "onto": "到...之上",
        "upon": "在...之上",
        "within": "在...之内",
        "outside": "在...之外",
        "around": "围绕",
        "near": "靠近",
        "beside": "在旁边",
        "behind": "在后面",
        "before": "在前面",
        "after": "在之后",
        "above": "在上面",
        "below": "在下面",
        "up": "向上",
        "down": "向下",
        "left": "左",
        "right": "右",
        "center": "中心",
        "middle": "中间",
        "side": "侧面",
        "edge": "边缘",
        "corner": "角落",
        "end": "末端",
        "start": "开始",
        "beginning": "起点",
        "front": "前面",
        "back": "后面",
        "top": "顶部",
        "bottom": "底部",
        "base": "基础",
        "foundation": "地基",
        "point": "点",
        "line": "线",
        "area": "区域",
        "space": "空间",
        "place": "位置",
        "site": "地点",
        "location": "位置",
        "position": "位置",
        "direction": "方向",
        "distance": "距离",
        "size": "大小",
        "shape": "形状",
        "form": "形式",
        "color": "颜色",
        "red": "红色",
        "blue": "蓝色",
        "green": "绿色",
        "yellow": "黄色",
        "white": "白色",
        "black": "黑色",
        "brown": "棕色",
        "gray": "灰色",
        "grey": "灰色",
        "purple": "紫色",
        "orange": "橙色",
        "pink": "粉色",
        "clear": "透明",
        "dark": "黑暗",
        "light": "光明",
        "bright": "明亮",
        "dim": "昏暗",
        "shadow": "阴影",
        "shade": "阴凉",
        "glow": "发光",
        "shine": "闪耀",
        "sparkle": "闪烁",
        "gleam": "微光",
        "glitter": "闪光",
        "light": "光",
        "heavy": "重",
        "large": "大",
        "small": "小",
        "huge": "巨大",
        "tiny": "微小",
        "long": "长",
        "short": "短",
        "wide": "宽",
        "narrow": "窄",
        "thick": "厚",
        "thin": "薄",
        "deep": "深",
        "shallow": "浅",
        "high": "高",
        "low": "低",
        "fast": "快",
        "slow": "慢",
        "quick": "迅速",
        "swift": "敏捷",
        "slowly": "缓慢地",
        "rapidly": "快速地",
        "instant": "瞬间",
        "moment": "时刻",
        "second": "秒",
        "minute": "分钟",
        "hour": "小时",
        "day": "天",
        "week": "周",
        "month": "月",
        "year": "年",
        "season": "季节",
        "spring": "春天",
        "summer": "夏天",
        "autumn": "秋天",
        "fall": "秋天",
        "winter": "冬天",
        "time": "时间",
        "period": "时期",
        "age": "年龄",
        "era": "时代",
        "epoch": "纪元",
        "date": "日期",
        "history": "历史",
        "past": "过去",
        "present": "现在",
        "future": "未来",
        "before": "之前",
        "after": "之后",
        "during": "期间",
        "while": "当...时",
        "until": "直到",
        "since": "自从",
        "ago": "以前",
        "now": "现在",
        "then": "然后",
        "soon": "很快",
        "later": "稍后",
        "early": "早",
        "late": "晚",
        "always": "总是",
        "never": "从不",
        "often": "经常",
        "sometimes": "有时",
        "rarely": "很少",
        "usually": "通常",
        "frequently": "频繁地",
        "occasionally": "偶尔",
        "once": "一次",
        "twice": "两次",
        "again": "再次",
        "first": "第一",
        "last": "最后",
        "next": "下一个",
        "previous": "上一个",
        "final": "最终",
        "initial": "初始",
        "original": "原始",
        "new": "新",
        "old": "旧",
        "ancient": "古老",
        "modern": "现代",
        "current": "当前",
        "recent": "最近",
        "early": "早期",
        "late": "晚期",
        "young": "年轻",
        "elder": "年长",
        "one": "一",
        "two": "二",
        "three": "三",
        "four": "四",
        "five": "五",
        "six": "六",
        "seven": "七",
        "eight": "八",
        "nine": "九",
        "ten": "十",
        "eleven": "十一",
        "twelve": "十二",
        "twenty": "二十",
        "hundred": "百",
        "thousand": "千",
        "million": "百万",
        "first": "第一",
        "second": "第二",
        "third": "第三",
        "fourth": "第四",
        "fifth": "第五",
        "number": "数字",
        "amount": "数量",
        "count": "计数",
        "quantity": "数量",
        "total": "总计",
        "sum": "总和",
        "part": "部分",
        "piece": "块",
        "portion": "份额",
        "half": "一半",
        "quarter": "四分之一",
        "whole": "整个",
        "full": "满的",
        "empty": "空的",
        "none": "没有",
        "zero": "零",
        "nothing": "无",
        "something": "某物",
        "anything": "任何事物",
        "everything": "一切",
        "all": "所有",
        "each": "每个",
        "every": "每一",
        "both": "两者",
        "either": "任一",
        "neither": "两者都不",
        "other": "其他",
        "another": "另一个",
        "same": "相同",
        "different": "不同",
        "similar": "相似",
        "various": "各种",
        "several": "几个",
        "many": "许多",
        "few": "很少",
        "much": "很多",
        "more": "更多",
        "most": "最多",
        "less": "更少",
        "least": "最少",
        "enough": "足够",
        "plenty": "充足",
        "lack": "缺乏",
        "shortage": "短缺",
        "excess": "过量",
        "extra": "额外",
        "spare": "备用",
        "only": "只有",
        "just": "仅仅",
        "merely": "只不过",
        "simply": "简单地",
        "barely": "几乎不",
        "hardly": "几乎不",
        "almost": "几乎",
        "nearly": "将近",
        "approximately": "大约",
        "about": "关于",
        "around": "大约",
        "roughly": "粗略地",
        "exactly": "精确地",
        "precisely": "准确地",
        "specifically": "具体地",
        "particularly": "特别",
        "especially": "尤其",
        "mainly": "主要",
        "mostly": "大部分",
        "largely": "很大程度上",
        "partly": "部分地",
        "entirely": "完全地",
        "completely": "彻底地",
        "totally": "完全",
        "fully": "充分地",
        "absolutely": "绝对",
        "relatively": "相对地",
        "fairly": "相当",
        "pretty": "相当",
        "rather": "相当",
        "quite": "很",
        "very": "非常",
        "extremely": "极其",
        "incredibly": "难以置信地",
        "extraordinarily": "非凡地",
        "remarkably": "显著地",
        "notably": "显著地",
        "significantly": "显著地",
        "considerably": "相当地",
        "substantially": "实质上",
        "greatly": "大大地",
        "highly": "高度地",
        "deeply": "深深地",
        "strongly": "强烈地",
        "weakly": "微弱地",
        "slightly": "轻微地",
        "somewhat": "有点",
        "kind": "种类",
        "type": "类型",
        "sort": "种类",
        "class": "类别",
        "category": "分类",
        "group": "组",
        "set": "集合",
        "collection": "集合",
        "series": "系列",
        "list": "列表",
        "array": "数组",
        "range": "范围",
        "variety": "多样性",
        "mixture": "混合物",
        "combination": "组合",
        "composition": "构成",
        "structure": "结构",
        "system": "系统",
        "network": "网络",
        "chain": "链",
        "series": "系列",
        "sequence": "序列",
        "order": "顺序",
        "arrangement": "排列",
        "pattern": "模式",
        "design": "设计",
        "plan": "计划",
        "scheme": "方案",
        "method": "方法",
        "way": "方式",
        "manner": "方式",
        "means": "手段",
        "process": "过程",
        "procedure": "程序",
        "operation": "操作",
        "action": "行动",
        "activity": "活动",
        "task": "任务",
        "work": "工作",
        "function": "功能",
        "role": "角色",
        "purpose": "目的",
        "goal": "目标",
        "aim": "目标",
        "objective": "目标",
        "target": "目标",
        "end": "结束",
        "result": "结果",
        "outcome": "结果",
        "effect": "效果",
        "consequence": "后果",
        "product": "产物",
        "output": "输出",
        "yield": "产量",
        "return": "返回",
        "value": "价值",
        "worth": "价值",
        "benefit": "好处",
        "advantage": "优势",
        "gain": "收益",
        "profit": "利润",
        "cost": "成本",
        "price": "价格",
        "expense": "费用",
        "loss": "损失",
        "damage": "伤害",
        "harm": "伤害",
        "hurt": "受伤",
        "injury": "伤害",
        "wound": "伤口",
        "risk": "风险",
        "danger": "危险",
        "threat": "威胁",
        "hazard": "危害",
        "safety": "安全",
        "security": "安全",
        "protection": "保护",
        "defense": "防御",
        "guard": "守卫",
        "shield": "盾牌",
        "cover": "覆盖",
        "screen": "屏幕",
        "barrier": "屏障",
        "obstacle": "障碍",
        "block": "阻挡",
        "prevent": "阻止",
        "stop": "停止",
        "halt": " halt",
        "avoid": "避免",
        "escape": "逃避",
        "flee": "逃跑",
        "hide": "隐藏",
        "conceal": "隐藏",
        "secret": "秘密",
        "private": "私人",
        "public": "公共",
        "open": "开放",
        "free": "自由",
        "safe": "安全",
        "secure": "安全",
        "stable": "稳定",
        "steady": "稳固",
        "firm": "坚固",
        "solid": "固体",
        "hard": "硬",
        "soft": "软",
        "smooth": "光滑",
        "rough": "粗糙",
        "sharp": "锋利",
        "blunt": "钝",
        "pointed": "尖的",
        "round": "圆",
        "square": "方",
        "flat": "平",
        "level": "水平",
        "even": "均匀",
        "uneven": "不均匀",
        "regular": "规则",
        "irregular": "不规则",
        "uniform": "统一",
        "consistent": "一致",
        "constant": "恒定",
        "continuous": "连续",
        "continual": "持续",
        "persistent": "持久",
        "permanent": "永久",
        "temporary": "临时",
        "brief": "简短",
        "short": "短",
        "long": "长",
        "lasting": "持久",
        "enduring": "耐久",
        "durable": "耐用",
        "strong": "强",
        "strength": "力量",
        "weak": "弱",
        "weakness": "弱点",
        "feeble": "虚弱",
        "fragile": "脆弱",
        "delicate": "精致",
        "brittle": "易碎",
        "flexible": "灵活",
        "rigid": "刚性",
        "stiff": "僵硬",
        "tight": "紧",
        "loose": "松",
        "firm": "牢固",
        "secure": "安全",
        "fast": "快",
        "slow": "慢",
        "speed": "速度",
        "velocity": "速率",
        "pace": "步伐",
        "rate": "比率",
        "frequency": "频率",
        "interval": "间隔",
        "cycle": "循环",
        "phase": "阶段",
        "stage": "阶段",
        "step": "步骤",
        "degree": "程度",
        "extent": "范围",
        "scope": "范围",
        "scale": "规模",
        "magnitude": "量级",
        "intensity": "强度",
        "force": "力量",
        "energy": "能量",
        "power": "力量",
        "strength": "强度",
        "might": "威力",
        "vigor": "活力",
        "life": "生命",
        "live": "活着",
        "living": "活的",
        "alive": "活着的",
        "dead": "死亡的",
        "death": "死亡",
        "die": "死亡",
        "kill": "杀死",
        "destroy": "摧毁",
        "ruin": "毁坏",
        "damage": "损坏",
        "break": "打破",
        "crack": "裂缝",
        "split": "分裂",
        "tear": "撕裂",
        "rip": "撕开",
        "shred": "切碎",
        "crush": "压碎",
        "smash": "粉碎",
        "shatter": "打碎",
        "fragment": "碎片",
        "piece": "碎片",
        "bit": "一点",
        "part": "部分",
        "section": "部分",
        "segment": "段",
        "division": "分割",
        "separation": "分离",
        "cut": "切",
        "slice": "切片",
        "dice": "切丁",
        "chop": "砍",
        "hack": "劈",
        "slash": "砍",
        "stab": "刺",
        "pierce": "刺穿",
        "puncture": "刺破",
        "hole": "洞",
        "gap": "缺口",
        "opening": "开口",
        "entrance": "入口",
        "exit": "出口",
        "way": "路",
        "path": "路径",
        "route": "路线",
        "course": "路线",
        "track": "轨迹",
        "trail": "踪迹",
        "trace": "痕迹",
        "mark": "标记",
        "sign": "标志",
        "signal": "信号",
        "symbol": "符号",
        "character": "字符",
        "letter": "字母",
        "word": "词",
        "phrase": "短语",
        "sentence": "句子",
        "paragraph": "段落",
        "chapter": "章节",
        "section": "节",
        "page": "页",
        "sheet": "张",
        "leaf": "叶",
        "paper": "纸",
        "document": "文档",
        "record": "记录",
        "file": "文件",
        "data": "数据",
        "information": "信息",
        "message": "消息",
        "news": "新闻",
        "story": "故事",
        "tale": "传说",
        "legend": "传说",
        "myth": "神话",
        "rumor": "谣言",
        "report": "报告",
        "account": "描述",
        "description": "描述",
        "explanation": "解释",
        "definition": "定义",
        "meaning": "意思",
        "sense": "意义",
        "idea": "想法",
        "thought": "想法",
        "concept": "概念",
        "notion": "概念",
        "theory": "理论",
        "hypothesis": "假设",
        "assumption": "假设",
        "belief": "信念",
        "faith": "信仰",
        "trust": "信任",
        "confidence": "信心",
        "hope": "希望",
        "wish": "愿望",
        "desire": "渴望",
        "want": "想要",
        "need": "需要",
        "require": "要求",
        "demand": "要求",
        "request": "请求",
        "ask": "问",
        "question": "问题",
        "query": "询问",
        "inquiry": "询问",
        "answer": "回答",
        "reply": "回复",
        "response": "回应",
        "reaction": "反应",
        "return": "返回",
        "feedback": "反馈",
        "comment": "评论",
        "remark": "备注",
        "note": "笔记",
        "notice": "通知",
        "warning": "警告",
        "caution": "小心",
        "advice": "建议",
        "suggestion": "建议",
        "recommendation": "推荐",
        "tip": "提示",
        "hint": "暗示",
        "clue": "线索",
        "evidence": "证据",
        "proof": "证明",
        "fact": "事实",
        "truth": "真相",
        "reality": "现实",
        "existence": "存在",
        "being": "存在",
        "entity": "实体",
        "object": "对象",
        "thing": "事物",
        "stuff": "东西",
        "matter": "物质",
        "substance": "物质",
        "material": "材料",
        "element": "元素",
        "component": "组件",
        "constituent": "成分",
        "ingredient": "原料",
        "factor": "因素",
        "aspect": "方面",
        "feature": "特点",
        "characteristic": "特征",
        "quality": "质量",
        "property": "属性",
        "attribute": "属性",
        "nature": "性质",
        "essence": "本质",
        "core": "核心",
        "heart": "心",
        "soul": "灵魂",
        "spirit": "精神",
        "mind": "思想",
        "brain": "大脑",
        "head": "头",
        "face": "脸",
        "eye": "眼睛",
        "ear": "耳朵",
        "nose": "鼻子",
        "mouth": "嘴",
        "lip": "嘴唇",
        "tooth": "牙齿",
        "tongue": "舌头",
        "throat": "喉咙",
        "neck": "脖子",
        "shoulder": "肩膀",
        "arm": "手臂",
        "hand": "手",
        "finger": "手指",
        "palm": "手掌",
        "wrist": "手腕",
        "elbow": "肘部",
        "chest": "胸部",
        "back": "背部",
        "waist": "腰部",
        "hip": "臀部",
        "leg": "腿",
        "knee": "膝盖",
        "foot": "脚",
        "feet": "脚",
        "toe": "脚趾",
        "skin": "皮肤",
        "hair": "头发",
        "nail": "指甲",
        "bone": "骨头",
        "muscle": "肌肉",
        "nerve": "神经",
        "vein": "静脉",
        "artery": "动脉",
        "blood": "血液",
        "flesh": "肉",
        "fat": "脂肪",
        "organ": "器官",
        "heart": "心脏",
        "lung": "肺",
        "liver": "肝脏",
        "kidney": "肾脏",
        "stomach": "胃",
        "brain": "大脑",
        "bowel": "肠",
        "gut": "肠道",
        "bladder": "膀胱",
        "womb": "子宫",
        "egg": "卵",
        "sperm": "精子",
        "seed": "种子",
        "root": "根",
        "stem": "茎",
        "branch": "枝",
        "twig": "细枝",
        "leaf": "叶",
        "flower": "花",
        "petal": "花瓣",
        "blossom": "花朵",
        "fruit": "果实",
        "nut": "坚果",
        "berry": "浆果",
        "grain": "谷物",
        "kernel": "核",
        "core": "核心",
        "shell": "壳",
        "husk": "外皮",
        "peel": "皮",
        "skin": "皮",
        "bark": "树皮",
        "trunk": "树干",
        "log": "原木",
        "timber": "木材",
        "wood": "木头",
        "plank": "木板",
        "board": "板",
        "stick": "棍",
        "rod": "杆",
        "pole": "杆",
        "post": "柱",
        "pillar": "柱子",
        "column": "圆柱",
        "beam": "梁",
        "rafter": "椽",
        "joist": "托梁",
        "support": "支撑",
        "brace": "支架",
        "prop": "支柱",
        "strut": "支撑",
        "tie": "绑",
        "bond": "结合",
        "link": "连接",
        "connection": "连接",
        "joint": "关节",
        "junction": "连接点",
        "intersection": "交叉点",
        "crossing": "十字路口",
        "crossroad": "十字路口",
        "fork": "分叉",
        "branch": "分支",
        "split": "分裂",
        "divide": "分割",
        "separate": "分离",
        "part": "分开",
        "depart": "离开",
        "leave": "离开",
        "go": "去",
        "come": "来",
        "arrive": "到达",
        "reach": "到达",
        "get": "得到",
        "obtain": "获得",
        "acquire": "获得",
        "gain": "获得",
        "earn": "赚取",
        "win": "赢得",
        "lose": "失去",
        "lost": "丢失",
        "find": "找到",
        "found": "发现",
        "discover": "发现",
        "detect": "检测",
        "notice": "注意",
        "see": "看见",
        "look": "看",
        "watch": "观看",
        "observe": "观察",
        "view": "查看",
        "sight": "视线",
        "vision": "视觉",
        "eye": "眼睛",
        "appear": "出现",
        "seem": "似乎",
        "look": "看起来",
        "sound": "听起来",
        "feel": "感觉",
        "touch": "触摸",
        "taste": "品尝",
        "smell": "闻",
        "sense": "感知",
        "perceive": "感知",
        "experience": "体验",
        "know": "知道",
        "understand": "理解",
        "comprehend": "理解",
        "grasp": "掌握",
        "learn": "学习",
        "study": "学习",
        "research": "研究",
        "investigate": "调查",
        "explore": "探索",
        "search": "搜索",
        "seek": "寻找",
        "hunt": "狩猎",
        "chase": "追逐",
        "pursue": "追求",
        "follow": "跟随",
        "track": "追踪",
        "trail": "追踪",
        "trace": "追踪",
        "shadow": "尾随",
        "accompany": "陪伴",
        "escort": "护送",
        "guide": "引导",
        "lead": "领导",
        "direct": "指挥",
        "command": "命令",
        "order": "命令",
        "instruct": "指示",
        "teach": "教导",
        "educate": "教育",
        "train": "训练",
        "practice": "练习",
        "drill": "操练",
        "exercise": "锻炼",
        "work": "工作",
        "labor": "劳动",
        "toil": "辛苦",
        "effort": "努力",
        "attempt": "尝试",
        "try": "尝试",
        "endeavor": "努力",
        "struggle": "奋斗",
        "strive": "努力",
        "fight": "战斗",
        "battle": "战斗",
        "combat": "战斗",
        "war": "战争",
        "conflict": "冲突",
        "clash": "冲突",
        "collision": "碰撞",
        "impact": "影响",
        "strike": "打击",
        "hit": "击中",
        "beat": "击打",
        "pound": "重击",
        "bash": "猛击",
        "slam": "猛撞",
        "bang": "猛敲",
        "knock": "敲",
        "tap": "轻敲",
        "pat": "轻拍",
        "touch": "触摸",
        "stroke": "抚摸",
        "rub": "摩擦",
        "scratch": "抓",
        "scrape": "刮",
        "cut": "切割",
        "slice": "切片",
        "dice": "切丁",
        "chop": "砍",
        "carve": "雕刻",
        "shape": "塑造",
        "form": "形成",
        "mold": "模制",
        "cast": "铸造",
        "forge": "锻造",
        "smith": "铁匠",
        "hammer": "锤",
        "anvil": "铁砧",
        "furnace": "熔炉",
        "kiln": "窑",
        "oven": "烤炉",
        "stove": "炉子",
        "fireplace": "壁炉",
        "hearth": "炉床",
        "chimney": "烟囱",
        "smokestack": "烟筒",
        "vent": "通风口",
        "duct": "管道",
        "pipe": "管",
        "tube": "管子",
        "cylinder": "圆柱",
        "barrel": "桶",
        "drum": "鼓",
        "cask": "木桶",
        "keg": "小桶",
        "tank": "罐",
        "vat": "大桶",
        "tub": "浴盆",
        "basin": "盆",
        "bowl": "碗",
        "dish": "盘子",
        "plate": "盘子",
        "tray": "托盘",
        "saucer": "茶碟",
        "cup": "杯子",
        "mug": "马克杯",
        "glass": "玻璃杯",
        "bottle": "瓶子",
        "jar": "罐子",
        "pot": "锅",
        "pan": "平底锅",
        "kettle": "水壶",
        "pot": "壶",
        "jug": "壶",
        "pitcher": "大水罐",
        "flask": "烧瓶",
        "vial": "小瓶",
        "phial": "小瓶",
        "container": "容器",
        "holder": "支架",
        "carrier": "载体",
        "bearer": "持票人",
        "porter": "搬运工",
        "messenger": "信使",
        "courier": "快递员",
        "runner": "信使",
        "scout": "侦察兵",
        "spy": "间谍",
        "agent": "特工",
        "operative": "操作人员",
        "worker": "工人",
        "laborer": "劳动者",
        "employee": "雇员",
        "employer": "雇主",
        "boss": "老板",
        "master": "主人",
        "chief": "首领",
        "leader": "领导者",
        "head": "头",
        "captain": "船长",
        "commander": "指挥官",
        "officer": "军官",
        "official": "官员",
        "authority": "权威",
        "ruler": "统治者",
        "king": "国王",
        "queen": "女王",
        "prince": "王子",
        "princess": "公主",
        "lord": "领主",
        "lady": "女士",
        "duke": "公爵",
        "duchess": "公爵夫人",
        "count": "伯爵",
        "countess": "伯爵夫人",
        "baron": "男爵",
        "baroness": "男爵夫人",
        "knight": "骑士",
        "warrior": "战士",
        "soldier": "士兵",
        "guard": "守卫",
        "protector": "保护者",
        "defender": "防御者",
        "hero": "英雄",
        "champion": "冠军",
        "victor": "胜利者",
        "winner": "获胜者",
        "conqueror": "征服者",
        "vanquisher": "战胜者",
        "enemy": "敌人",
        "foe": "敌人",
        "opponent": "对手",
        "adversary": "对手",
        "rival": "竞争对手",
        "competitor": "竞争者",
        "contender": "竞争者",
        "contestant": "参赛者",
        "participant": "参与者",
        "member": "成员",
        "associate": "伙伴",
        "partner": "伙伴",
        "ally": "盟友",
        "companion": "同伴",
        "friend": "朋友",
        "pal": "伙伴",
        "buddy": "伙伴",
        "mate": "伙伴",
        "chum": "密友",
        "comrade": "同志",
        "colleague": "同事",
        "peer": "同辈",
        "equal": "平等",
        "equivalent": "等价",
        "match": "匹配",
        "counterpart": "对应物",
        "opposite": "相反",
        "reverse": "反转",
        "inverse": "相反",
        "contrary": "相反",
        "contrast": "对比",
        "compare": "比较",
        "comparison": "比较",
        "measure": "测量",
        "weigh": "称重",
        "balance": "平衡",
        "scale": "秤",
        "level": "水平",
        "equal": "等于",
        "equate": "等同",
        "match": "匹配",
        "fit": "适合",
        "suit": "适合",
        "adapt": "适应",
        "adjust": "调整",
        "modify": "修改",
        "alter": "改变",
        "change": "改变",
        "transform": "转变",
        "convert": "转换",
        "turn": "转动",
        "shift": "移动",
        "move": "移动",
        "transfer": "转移",
        "transport": "运输",
        "carry": "携带",
        "bring": "带来",
        "take": "拿走",
        "fetch": "取",
        "send": "发送",
        "deliver": "递送",
        "dispatch": "派遣",
        "ship": "运送",
        "export": "出口",
        "import": "进口",
        "trade": "贸易",
        "exchange": "交换",
        "barter": "物物交换",
        "buy": "购买",
        "sell": "出售",
        "purchase": "购买",
        "acquire": "获得",
        "obtain": "获得",
        "get": "得到",
        "give": "给予",
        "donate": "捐赠",
        "contribute": "贡献",
        "provide": "提供",
        "supply": "供应",
        "furnish": "提供",
        "equip": "装备",
        "arm": "武装",
        "prepare": "准备",
        "ready": "准备好",
        "make": "制作",
        "create": "创造",
        "produce": "生产",
        "manufacture": "制造",
        "construct": "建造",
        "build": "建造",
        "assemble": "组装",
        "fabricate": "制造",
        "synthesize": "合成",
        "generate": "产生",
        "originate": "起源",
        "initiate": "发起",
        "start": "开始",
        "begin": "开始",
        "commence": "开始",
        "launch": "启动",
        "open": "打开",
        "close": "关闭",
        "end": "结束",
        "finish": "完成",
        "complete": "完成",
        "conclude": "结束",
        "terminate": "终止",
        "cease": "停止",
        "stop": "停止",
        "halt": "暂停",
        "pause": "暂停",
        "break": "休息",
        "rest": "休息",
        "relax": "放松",
        "sleep": "睡觉",
        "slumber": "睡眠",
        "dream": "梦想",
        "wake": "醒来",
        "awake": "醒着",
        "arise": "起身",
        "rise": "上升",
        "raise": "举起",
        "lift": "抬起",
        "elevate": "抬高",
        "hoist": "吊起",
        "heave": "举起",
        "boost": "促进",
        "lower": "降低",
        "drop": "落下",
        "fall": "掉落",
        "descend": "下降",
        "decline": "下降",
        "decrease": "减少",
        "reduce": "减少",
        "diminish": "减少",
        "lessen": "减少",
        "increase": "增加",
        "grow": "增长",
        "expand": "扩展",
        "extend": "延伸",
        "stretch": "伸展",
        "spread": "传播",
        "distribute": "分配",
        "share": "分享",
        "divide": "分割",
        "split": "分裂",
        "separate": "分离",
        "part": "分开",
        "join": "加入",
        "unite": "联合",
        "combine": "结合",
        "merge": "合并",
        "integrate": "整合",
        "mix": "混合",
        "blend": "混合",
        "stir": "搅拌",
        "shake": "摇动",
        "stir": "搅动",
        "agitate": "搅动",
        "move": "移动",
        "shift": "转移",
        "transfer": "转移",
        "switch": "切换",
        "change": "改变",
        "replace": "替换",
        "substitute": "替代",
        "exchange": "交换",
        "swap": "交换",
        "trade": "交易",
        "barter": "交换",
        "deal": "交易",
        "transaction": "交易",
        "negotiation": "谈判",
        "bargain": "讨价还价",
        "contract": "合同",
        "agreement": "协议",
        "treaty": "条约",
        "pact": "公约",
        "alliance": "联盟",
        "union": "联盟",
        "association": "协会",
        "society": "社会",
        "community": "社区",
        "group": "组",
        "organization": "组织",
        "institution": "机构",
        "establishment": "机构",
        "foundation": "基础",
        "base": "基地",
        "basis": "基础",
        "ground": "地面",
        "floor": "地板",
        "earth": "地球",
        "land": "陆地",
        "ground": "土地",
        "soil": "土壤",
        "dirt": "泥土",
        "mud": "泥",
        "clay": "粘土",
        "sand": "沙子",
        "dust": "灰尘",
        "ash": "灰烬",
        "soot": "煤烟",
        "grime": "污垢",
        "filth": "污秽",
        "pollution": "污染",
        "contamination": "污染",
        "infection": "感染",
        "disease": "疾病",
        "illness": "疾病",
        "sickness": "疾病",
        "ailment": "小病",
        "malady": "疾病",
        "disorder": "紊乱",
        "condition": "条件",
        "state": "状态",
        "status": "地位",
        "situation": "情况",
        "circumstance": "环境",
        "environment": "环境",
        "surroundings": "周围环境",
        "setting": "设置",
        "background": "背景",
        "context": "上下文",
        "framework": "框架",
        "structure": "结构",
        "system": "系统",
        "scheme": "方案",
        "plan": "计划",
        "project": "项目",
        "program": "程序",
        "policy": "政策",
        "strategy": "策略",
        "tactic": "战术",
        "procedure": "程序",
        "process": "过程",
        "method": "方法",
        "way": "方式",
        "manner": "方式",
        "mode": "模式",
        "fashion": "时尚",
        "style": "风格",
        "form": "形式",
        "shape": "形状",
        "pattern": "模式",
        "model": "模型",
        "example": "例子",
        "sample": "样本",
        "instance": "实例",
        "case": "案例",
        "illustration": "插图",
        "demonstration": "演示",
        "exhibition": "展览",
        "display": "展示",
        "show": "展示",
        "presentation": "演示",
        "representation": "代表",
        "portrayal": "描绘",
        "depiction": "描述",
        "description": "描述",
        "account": "描述",
        "narrative": "叙述",
        "story": "故事",
        "tale": "传说",
        "yarn": "故事",
        "anecdote": "轶事",
        "episode": "插曲",
        "event": "事件",
        "incident": "事件",
        "occurrence": "发生",
        "happening": "发生的事",
        "phenomenon": "现象",
        "experience": "经历",
        "adventure": "冒险",
        "enterprise": "企业",
        "undertaking": "事业",
        "venture": "风险",
        "risk": "风险",
        "gamble": "赌博",
        "bet": "打赌",
        "wager": "赌注",
        "stake": "赌注",
        "chance": "机会",
        "opportunity": "机会",
        "possibility": "可能性",
        "probability": "概率",
        "likelihood": "可能性",
        "odds": "几率",
        "prospect": "前景",
        "hope": "希望",
        "expectation": "期望",
        "anticipation": "预期",
        "prediction": "预测",
        "forecast": "预测",
        "prophecy": "预言",
        "omen": "预兆",
        "sign": "迹象",
        "portent": "征兆",
        "warning": "警告",
        "caution": "警告",
        "admonition": "告诫",
        "advice": "建议",
        "counsel": "建议",
        "guidance": "指导",
        "direction": "方向",
        "instruction": "指示",
        "order": "命令",
        "command": "命令",
        "directive": "指令",
        "mandate": "授权",
        "decree": "法令",
        "edict": "法令",
        "proclamation": "公告",
        "announcement": "公告",
        "declaration": "声明",
        "statement": "陈述",
        "utterance": "说话",
        "remark": "评论",
        "comment": "评论",
        "observation": "观察",
        "note": "笔记",
        "mention": "提到",
        "reference": "参考",
        "allusion": "暗示",
        "hint": "暗示",
        "suggestion": "建议",
        "implication": "暗示",
        "insinuation": "影射",
        "innuendo": "讽刺",
        "slur": "诽谤",
        "insult": "侮辱",
        "affront": "冒犯",
        "offense": "冒犯",
        "indignity": "侮辱",
        "outrage": "暴行",
        "atrocity": "暴行",
        "abomination": "厌恶",
        "horror": "恐惧",
        "terror": "恐怖",
        "dread": "恐惧",
        "fear": "害怕",
        "fright": "惊吓",
        "alarm": "警报",
        "panic": "恐慌",
        "scare": "惊吓",
        "startle": "吓一跳",
        "surprise": "惊讶",
        "shock": "震惊",
        "astonishment": "惊讶",
        "amazement": "惊奇",
        "wonder": "惊奇",
        "awe": "敬畏",
        "admiration": "钦佩",
        "respect": "尊重",
        "esteem": "尊重",
        "regard": "关心",
        "consideration": "考虑",
        "concern": "关心",
        "care": "关心",
        "attention": "注意",
        "heed": "注意",
        "notice": "注意",
        "observation": "观察",
        "watch": "观看",
        "vigilance": "警惕",
        "alertness": "警觉",
        "wakefulness": "清醒",
        "consciousness": "意识",
        "awareness": "意识",
        "perception": "感知",
        "recognition": "识别",
        "identification": "识别",
        "diagnosis": "诊断",
        "analysis": "分析",
        "examination": "检查",
        "inspection": "检查",
        "scrutiny": "审查",
        "investigation": "调查",
        "inquiry": "询问",
        "research": "研究",
        "study": "学习",
        "review": "审查",
        "survey": "调查",
        "assessment": "评估",
        "evaluation": "评价",
        "appraisal": "评估",
        "estimate": "估计",
        "calculation": "计算",
        "computation": "计算",
        "reckoning": "计算",
        "count": "计数",
        "enumeration": "列举",
        "list": "列表",
        "catalog": "目录",
        "directory": "目录",
        "index": "索引",
        "register": "登记",
        "record": "记录",
        "archive": "档案",
        "file": "文件",
        "document": "文档",
        "report": "报告",
        "account": "描述",
        "chronicle": "编年史",
        "history": "历史",
        "annals": "史册",
        "records": "记录",
        "minutes": "纪要",
        "proceedings": "诉讼程序",
        "transactions": "交易",
        "affairs": "事务",
        "business": "业务",
        "matters": "事项",
        "concerns": "关切",
        "issues": "问题",
        "problems": "问题",
        "questions": "问题",
        "difficulties": "困难",
        "troubles": "麻烦",
        "predicaments": "困境",
        "plights": "困境",
        "dilemmas": "困境",
        "quandaries": "窘境",
        "crises": "危机",
        "emergencies": "紧急情况",
        "exigencies": "紧急",
        "necessities": "必需品",
        "needs": "需要",
        "requirements": "要求",
        "demands": "要求",
        "wants": "欲望",
        "desires": "愿望",
        "wishes": "希望",
        "hopes": "希望",
        "dreams": "梦想",
        "aspirations": "抱负",
        "ambitions": "抱负",
        "goals": "目标",
        "aims": "目标",
        "objectives": "目标",
        "ends": "结束",
        "purposes": "目的",
        "intentions": "意图",
        "motives": "动机",
        "incentives": "激励",
        "inducements": "诱因",
        "encouragements": "鼓励",
        "inspirations": "灵感",
        "stimuli": "刺激",
        "spurs": "刺激",
        "goads": "刺激",
        "prompts": "提示",
        "cues": "提示",
        "signals": "信号",
        "signs": "标志",
        "indications": "指示",
        "evidence": "证据",
        "proof": "证明",
        "verification": "验证",
        "confirmation": "确认",
        "validation": "验证",
        "authentication": "认证",
        "certification": "认证",
        "accreditation": "认可",
        "recognition": "识别",
        "acknowledgment": "承认",
        "admission": "承认",
        "acceptance": "接受",
        "receipt": "收据",
        "reception": "接待",
        "admittance": "入场",
        "access": "访问",
        "entry": "进入",
        "entrance": "入口",
        "ingress": "进入",
        "introduction": "介绍",
        "insertion": "插入",
        "inclusion": "包含",
        "incorporation": "合并",
        "assimilation": "同化",
        "absorption": "吸收",
        "digestion": "消化",
        "consumption": "消费",
        "use": "使用",
        "usage": "使用",
        "utilization": "利用",
        "employment": "就业",
        "application": "应用",
        "operation": "操作",
        "function": "功能",
        "service": "服务",
        "purpose": "目的",
        "role": "角色",
        "part": "部分",
        "function": "功能",
        "work": "工作",
        "task": "任务",
        "job": "工作",
        "duty": "职责",
        "responsibility": "责任",
        "obligation": "义务",
        "commitment": "承诺",
        "engagement": "参与",
        "involvement": "参与",
        "participation": "参与",
        "attendance": "出席",
        "presence": "存在",
        "appearance": "外观",
        "manifestation": "表现",
        "demonstration": "演示",
        "display": "展示",
        "exhibition": "展览",
        "show": "展示",
        "performance": "表现",
        "production": "生产",
        "creation": "创造",
        "formation": "形成",
        "construction": "建造",
        "assembly": "组装",
        "erection": "建造",
        "establishment": "建立",
        "institution": "机构",
        "foundation": "基础",
        "creation": "创造",
        "genesis": "起源",
        "origin": "起源",
        "source": "来源",
        "beginning": "开始",
        "start": "开始",
        "commencement": "开始",
        "inception": "开端",
        "outset": "开始",
        "onset": "开始",
        "dawn": "黎明",
        "birth": "出生",
        "conception": "概念",
        "creation": "创造",
        "production": "生产",
        "generation": "生成",
        "procreation": "生育",
        "reproduction": "繁殖",
        "breeding": "繁殖",
        "raising": "养育",
        "rearing": "养育",
        "nurturing": "培育",
        "cultivation": "培养",
        "development": "发展",
        "growth": "成长",
        "evolution": "进化",
        "progress": "进步",
        "advancement": "进步",
        "improvement": "改进",
        "enhancement": "增强",
        "augmentation": "增加",
        "expansion": "扩张",
        "extension": "延伸",
        "enlargement": "扩大",
        "increase": "增加",
        "addition": "增加",
        "gain": "收益",
        "acquisition": "获得",
        "procurement": "采购",
        "obtainment": "获得",
        "attainment": "达到",
        "achievement": "成就",
        "accomplishment": "成就",
        "fulfillment": "履行",
        "realization": "实现",
        "actualization": "实现",
        "materialization": "物化",
        "manifestation": "表现",
        "expression": "表达",
        "utterance": "说话",
        "statement": "陈述",
        "declaration": "声明",
        "assertion": "断言",
        "claim": "声称",
        "allegation": "指控",
        "accusation": "指责",
        "charge": "收费",
        "indictment": "起诉",
        "arraignment": "传讯",
        "prosecution": "起诉",
        "trial": "审判",
        "hearing": "听证会",
        "inquest": "调查",
        "inquiry": "询问",
        "investigation": "调查",
        "examination": "检查",
        "inspection": "检查",
        "scrutiny": "审查",
        "review": "审查",
        "analysis": "分析",
        "study": "学习",
        "research": "研究",
        "probe": "探针",
        "search": "搜索",
        "quest": "探索",
        "pursuit": "追求",
        "chase": "追逐",
        "hunt": "狩猎",
        "track": "追踪",
        "trail": "追踪",
        "trace": "追踪",
        "shadow": "尾随",
        "follow": "跟随",
        "accompany": "陪伴",
        "attend": "参加",
        "escort": "护送",
        "convoy": "护送",
        "guard": "守卫",
        "protect": "保护",
        "defend": "防御",
        "shield": "盾牌",
        "screen": "屏幕",
        "cover": "覆盖",
        "shelter": "庇护",
        "harbor": "港口",
        "refuge": "避难所",
        "asylum": "庇护",
        "sanctuary": "圣地",
        "haven": "避风港",
        "retreat": "撤退",
        "resort": "度假胜地",
    }

    # 从英文词条名中提取词汇映射
    # 例如 "IronSword" -> {"iron": "铁", "sword": "剑"}
    if os.path.isdir(wiki_dir):
        for filename in os.listdir(wiki_dir):
            if filename.endswith(".txt"):
                en_name = filename[:-4]  # 去掉 .txt
                # 尝试从已翻译的文件中获取对应中文名
                cn_filename = en_name + "-CN.txt"
                if os.path.exists(os.path.join(wiki_cn_dir, cn_filename)):
                    try:
                        with open(
                            os.path.join(wiki_cn_dir, cn_filename),
                            "r",
                            encoding="utf-8",
                        ) as f:
                            first_line = f.readline().strip()
                            # 如果是重定向，提取目标
                            redirect_match = re.match(
                                r"#redirect\s*\[\[(.+?)\]\]", first_line, re.IGNORECASE
                            )
                            if redirect_match:
                                cn_title = redirect_match.group(1)
                            else:
                                # 使用英文原名作为中文标题（因为可能没有真正的翻译）
                                cn_title = en_name

                            key = normalize_key(en_name)
                            title_map[key] = {"en": en_name, "cn": cn_title}
                    except Exception:
                        pass

    # 保存映射表
    output = {
        "title_map": title_map,
        "vocabulary_map": vocabulary_map,
        "metadata": {
            "total_titles": len(title_map),
            "total_vocabulary": len(vocabulary_map),
            "version": "1.0",
        },
    }

    output_path = os.path.join(script_dir, "translation_map.json")
    with open(output_path, "w", encoding="utf-8") as f:
        json.dump(output, f, ensure_ascii=False, indent=2)

    print(f"翻译映射表已生成: {output_path}")
    print(f"  - 词条映射: {len(title_map)} 个")
    print(f"  - 词汇映射: {len(vocabulary_map)} 个")

    return output


def load_translation_map():
    """加载翻译映射表"""
    script_dir = os.path.dirname(os.path.abspath(__file__))
    map_path = os.path.join(script_dir, "translation_map.json")

    if os.path.exists(map_path):
        with open(map_path, "r", encoding="utf-8") as f:
            return json.load(f)
    return None


if __name__ == "__main__":
    build_translation_map()
